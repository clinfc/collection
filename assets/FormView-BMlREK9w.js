import{d as O,u as B,c as we,o as R,w as ve,r as j,m as qe,a as C,T as Ue,b as v,e as be,i as ne,f as S,g as Ge,h as He,j as Ne,k as Me,l as ee,p as fe,n as ge,q as Ie,s as Oe,t as _,v as F,x as $e,y as Je,F as ue,z as Ee,A as Pe,B as Ke,C as Ye,D as Te,E as oe,G as Qe,H as Ze,I as Xe,J as et,K as Y,L as Q,M as se,N as tt,O as Be,P as nt,Q as _e,R as N,S as ze,U as ot,V as st,W as lt}from"./index-BsSbAyZg.js";import{E,t as te,_ as ye,a as X,h as at,r as de,T as ut,b as le,c as Ce,d as Ae,e as it,i as K,f as rt,C as ct,m as dt,u as pt,g as mt}from"./index-9GmvkRdV.js";import{_ as vt}from"./plugin-vueexport-helper-DlAUqK2U.js";let ft=class{constructor(t,o){this.parent=t,this.domNode=o,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,o=>{o.addEventListener("keydown",n=>{let u=!1;switch(n.code){case E.down:{this.gotoSubIndex(this.subIndex+1),u=!0;break}case E.up:{this.gotoSubIndex(this.subIndex-1),u=!0;break}case E.tab:{te(t,"mouseleave");break}case E.enter:case E.numpadEnter:case E.space:{u=!0,n.currentTarget.click();break}}return u&&(n.preventDefault(),n.stopPropagation()),!1})})}},ht=class{constructor(t,o){this.domNode=t,this.submenu=null,this.submenu=null,this.init(o)}init(t){this.domNode.setAttribute("tabindex","0");const o=this.domNode.querySelector(`.${t}-menu`);o&&(this.submenu=new ft(this,o)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let o=!1;switch(t.code){case E.down:{te(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),o=!0;break}case E.up:{te(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),o=!0;break}case E.tab:{te(t.currentTarget,"mouseleave");break}case E.enter:case E.numpadEnter:case E.space:{o=!0,t.currentTarget.click();break}}o&&t.preventDefault()})}},bt=class{constructor(t,o){this.domNode=t,this.init(o)}init(t){const o=this.domNode.childNodes;Array.from(o).forEach(n=>{n.nodeType===1&&new ht(n,t)})}};const Mt=O({name:"ElMenuCollapseTransition"}),gt=O({...Mt,setup(e){const t=B("menu"),o={onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,u){X(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",u()},onAfterEnter(n){de(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),at(n,t.m("collapse"))?(de(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),X(n,t.m("collapse"))):(X(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),de(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){X(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}};return(n,u)=>(R(),we(Ue,qe({mode:"out-in"},C(o)),{default:ve(()=>[j(n.$slots,"default")]),_:3},16))}});var It=ye(gt,[["__file","menu-collapse-transition.vue"]]);function Le(e,t){const o=v(()=>{let u=e.parent;const c=[t.value];for(;u.type.name!=="ElMenu";)u.props.index&&c.unshift(u.props.index),u=u.parent;return c});return{parentMenu:v(()=>{let u=e.parent;for(;u&&!["ElMenu","ElSubMenu"].includes(u.type.name);)u=u.parent;return u}),indexPath:o}}function _t(e){return v(()=>{const o=e.backgroundColor;return o?new ut(o).shade(20).toString():""})}const We=(e,t)=>{const o=B("menu");return v(()=>o.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":_t(e).value||"","active-color":e.activeTextColor||"",level:`${t}`}))},xe="rootMenu",ae="subMenu:",yt=be({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:K},expandOpenIcon:{type:K},collapseCloseIcon:{type:K},collapseOpenIcon:{type:K}}),pe="ElSubMenu";var Se=O({name:pe,props:yt,setup(e,{slots:t,expose:o}){const n=ge(),{indexPath:u,parentMenu:c}=Le(n,v(()=>e.index)),d=B("menu"),p=B("sub-menu"),i=ne(xe);i||le(pe,"can not inject root menu");const m=ne(`${ae}${c.value.uid}`);m||le(pe,"can not inject sub menu");const M=S({}),I=S({});let b;const x=S(!1),k=S(),q=S(),z=v(()=>L.value==="horizontal"&&A.value?"bottom-start":"right-start"),D=v(()=>L.value==="horizontal"&&A.value||L.value==="vertical"&&!i.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?w.value?e.expandOpenIcon:e.expandCloseIcon:Ge:e.collapseCloseIcon&&e.collapseOpenIcon?w.value?e.collapseOpenIcon:e.collapseCloseIcon:He),A=v(()=>m.level===0),U=v(()=>{const a=e.teleported;return Ne(a)?A.value:a}),ie=v(()=>i.props.collapse?`${d.namespace.value}-zoom-in-left`:`${d.namespace.value}-zoom-in-top`),Z=v(()=>L.value==="horizontal"&&A.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),w=v(()=>i.openedMenus.includes(e.index)),V=v(()=>[...Object.values(M.value),...Object.values(I.value)].some(({active:a})=>a)),L=v(()=>i.props.mode),re=v(()=>i.props.persistent),W=Me({index:e.index,indexPath:u,active:V}),G=We(i.props,m.level+1),H=v(()=>{var a;return(a=e.popperOffset)!=null?a:i.props.popperOffset}),J=v(()=>{var a;return(a=e.popperClass)!=null?a:i.props.popperClass}),ce=v(()=>{var a;return(a=e.showTimeout)!=null?a:i.props.showTimeout}),s=v(()=>{var a;return(a=e.hideTimeout)!=null?a:i.props.hideTimeout}),l=()=>{var a,y,g;return(g=(y=(a=q.value)==null?void 0:a.popperRef)==null?void 0:y.popperInstanceRef)==null?void 0:g.destroy()},r=a=>{a||l()},f=()=>{i.props.menuTrigger==="hover"&&i.props.mode==="horizontal"||i.props.collapse&&i.props.mode==="vertical"||e.disabled||i.handleSubMenuClick({index:e.index,indexPath:u.value,active:V.value})},h=(a,y=ce.value)=>{var g;if(a.type!=="focus"){if(i.props.menuTrigger==="click"&&i.props.mode==="horizontal"||!i.props.collapse&&i.props.mode==="vertical"||e.disabled){m.mouseInChild.value=!0;return}m.mouseInChild.value=!0,b==null||b(),{stop:b}=Ee(()=>{i.openMenu(e.index,u.value)},y),U.value&&((g=c.value.vnode.el)==null||g.dispatchEvent(new MouseEvent("mouseenter")))}},T=(a=!1)=>{var y;if(i.props.menuTrigger==="click"&&i.props.mode==="horizontal"||!i.props.collapse&&i.props.mode==="vertical"){m.mouseInChild.value=!1;return}b==null||b(),m.mouseInChild.value=!1,{stop:b}=Ee(()=>!x.value&&i.closeMenu(e.index,u.value),s.value),U.value&&a&&((y=m.handleMouseleave)==null||y.call(m,!0))};ee(()=>i.props.collapse,a=>r(!!a));{const a=g=>{I.value[g.index]=g},y=g=>{delete I.value[g.index]};fe(`${ae}${n.uid}`,{addSubMenu:a,removeSubMenu:y,handleMouseleave:T,mouseInChild:x,level:m.level+1})}return o({opened:w}),Ie(()=>{i.addSubMenu(W),m.addSubMenu(W)}),Oe(()=>{m.removeSubMenu(W),i.removeSubMenu(W)}),()=>{var a;const y=[(a=t.title)==null?void 0:a.call(t),_(Ce,{class:p.e("icon-arrow"),style:{transform:w.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&i.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>F(D.value)?_(n.appContext.components[D.value]):_(D.value)})],g=i.isMenuPopup?_(Ae,{ref:q,visible:w.value,effect:"light",pure:!0,offset:H.value,showArrow:!1,persistent:re.value,popperClass:J.value,placement:z.value,teleported:U.value,fallbackPlacements:Z.value,transition:ie.value,gpuAcceleration:!1},{content:()=>{var $;return _("div",{class:[d.m(L.value),d.m("popup-container"),J.value],onMouseenter:P=>h(P,100),onMouseleave:()=>T(!0),onFocus:P=>h(P,100)},[_("ul",{class:[d.b(),d.m("popup"),d.m(`popup-${z.value}`)],style:G.value},[($=t.default)==null?void 0:$.call(t)])])},default:()=>_("div",{class:p.e("title"),onClick:f},y)}):_(ue,{},[_("div",{class:p.e("title"),ref:k,onClick:f},y),_(it,{},{default:()=>{var $;return $e(_("ul",{role:"menu",class:[d.b(),d.m("inline")],style:G.value},[($=t.default)==null?void 0:$.call(t)]),[[Je,w.value]])}})]);return _("li",{class:[p.b(),p.is("active",V.value),p.is("opened",w.value),p.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:h,onMouseleave:()=>T(),onFocus:h},[g])}}});const Ct=be({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:oe(Array),default:()=>dt([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:K,default:()=>Qe},popperEffect:{type:oe(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),me=e=>Pe(e)&&e.every(t=>F(t)),xt={close:(e,t)=>F(e)&&me(t),open:(e,t)=>F(e)&&me(t),select:(e,t,o,n)=>F(e)&&me(t)&&Ke(o)&&(Ne(n)||n instanceof Promise)};var St=O({name:"ElMenu",props:Ct,emits:xt,setup(e,{emit:t,slots:o,expose:n}){const u=ge(),c=u.appContext.config.globalProperties.$router,d=S(),p=B("menu"),i=B("sub-menu"),m=S(-1),M=S(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),I=S(e.defaultActive),b=S({}),x=S({}),k=v(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),q=()=>{const s=I.value&&b.value[I.value];if(!s||e.mode==="horizontal"||e.collapse)return;s.indexPath.forEach(r=>{const f=x.value[r];f&&z(r,f.indexPath)})},z=(s,l)=>{M.value.includes(s)||(e.uniqueOpened&&(M.value=M.value.filter(r=>l.includes(r))),M.value.push(s),t("open",s,l))},D=s=>{const l=M.value.indexOf(s);l!==-1&&M.value.splice(l,1)},A=(s,l)=>{D(s),t("close",s,l)},U=({index:s,indexPath:l})=>{M.value.includes(s)?A(s,l):z(s,l)},ie=s=>{(e.mode==="horizontal"||e.collapse)&&(M.value=[]);const{index:l,indexPath:r}=s;if(!(Te(l)||Te(r)))if(e.router&&c){const f=s.route||l,h=c.push(f).then(T=>(T||(I.value=l),T));t("select",l,r,{index:l,indexPath:r,route:f},h)}else I.value=l,t("select",l,r,{index:l,indexPath:r})},Z=s=>{var l;const r=b.value,f=r[s]||I.value&&r[I.value]||r[e.defaultActive];I.value=(l=f==null?void 0:f.index)!=null?l:s},w=s=>{const l=getComputedStyle(s),r=Number.parseInt(l.marginLeft,10),f=Number.parseInt(l.marginRight,10);return s.offsetWidth+r+f||0},V=()=>{var s,l;if(!d.value)return-1;const r=Array.from((l=(s=d.value)==null?void 0:s.childNodes)!=null?l:[]).filter(P=>P.nodeName!=="#text"||P.nodeValue),f=64,h=getComputedStyle(d.value),T=Number.parseInt(h.paddingLeft,10),a=Number.parseInt(h.paddingRight,10),y=d.value.clientWidth-T-a;let g=0,$=0;return r.forEach((P,Fe)=>{P.nodeName!=="#comment"&&(g+=w(P),g<=y-f&&($=Fe+1))}),$===r.length?-1:$},L=s=>x.value[s].indexPath,re=(s,l=33.34)=>{let r;return()=>{r&&clearTimeout(r),r=setTimeout(()=>{s()},l)}};let W=!0;const G=()=>{if(m.value===V())return;const s=()=>{m.value=-1,Ze(()=>{m.value=V()})};W?s():re(s)(),W=!1};ee(()=>e.defaultActive,s=>{b.value[s]||(I.value=""),Z(s)}),ee(()=>e.collapse,s=>{s&&(M.value=[])}),ee(b.value,q);let H;Ye(()=>{e.mode==="horizontal"&&e.ellipsis?H=pt(d,G).stop:H==null||H()});const J=S(!1);{const s=h=>{x.value[h.index]=h},l=h=>{delete x.value[h.index]};fe(xe,Me({props:e,openedMenus:M,items:b,subMenus:x,activeIndex:I,isMenuPopup:k,addMenuItem:h=>{b.value[h.index]=h},removeMenuItem:h=>{delete b.value[h.index]},addSubMenu:s,removeSubMenu:l,openMenu:z,closeMenu:A,handleMenuItemClick:ie,handleSubMenuClick:U})),fe(`${ae}${u.uid}`,{addSubMenu:s,removeSubMenu:l,mouseInChild:J,level:0})}Ie(()=>{e.mode==="horizontal"&&new bt(u.vnode.el,p.namespace.value)}),n({open:l=>{const{indexPath:r}=x.value[l];r.forEach(f=>z(f,r))},close:D,updateActiveIndex:Z,handleResize:G});const ce=We(e,0);return()=>{var s,l;let r=(l=(s=o.default)==null?void 0:s.call(o))!=null?l:[];const f=[];if(e.mode==="horizontal"&&d.value){const a=rt(r),y=m.value===-1?a:a.slice(0,m.value),g=m.value===-1?[]:a.slice(m.value);g!=null&&g.length&&e.ellipsis&&(r=y,f.push(_(Se,{index:"sub-menu-more",class:i.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>_(Ce,{class:i.e("icon-more")},{default:()=>_(e.ellipsisIcon)}),default:()=>g})))}const h=e.closeOnClickOutside?[[ct,()=>{M.value.length&&(J.value||(M.value.forEach(a=>t("close",a,L(a))),M.value=[]))}]]:[],T=$e(_("ul",{key:String(e.collapse),role:"menubar",ref:d,style:ce.value,class:{[p.b()]:!0,[p.m(e.mode)]:!0,[p.m("collapse")]:e.collapse}},[...r,...f]),h);return e.collapseTransition&&e.mode==="vertical"?_(It,()=>T):T}}});const Et=be({index:{type:oe([String,null]),default:null},route:{type:oe([String,Object])},disabled:Boolean}),Tt={click:e=>F(e.index)&&Pe(e.indexPath)},he="ElMenuItem",kt=O({name:he}),wt=O({...kt,props:Et,emits:Tt,setup(e,{expose:t,emit:o}){const n=e;Xe(n.index)&&mt();const u=ge(),c=ne(xe),d=B("menu"),p=B("menu-item");c||le(he,"can not inject root menu");const{parentMenu:i,indexPath:m}=Le(u,et(n,"index")),M=ne(`${ae}${i.value.uid}`);M||le(he,"can not inject sub menu");const I=v(()=>n.index===c.activeIndex),b=Me({index:n.index,indexPath:m,active:I}),x=()=>{n.disabled||(c.handleMenuItemClick({index:n.index,indexPath:m.value,route:n.route}),o("click",b))};return Ie(()=>{M.addSubMenu(b),c.addMenuItem(b)}),Oe(()=>{M.removeSubMenu(b),c.removeMenuItem(b)}),t({parentMenu:i,rootMenu:c,active:I,nsMenu:d,nsMenuItem:p,handleClick:x}),(k,q)=>(R(),Y("li",{class:se([C(p).b(),C(p).is("active",C(I)),C(p).is("disabled",k.disabled)]),role:"menuitem",tabindex:"-1",onClick:x},[C(i).type.name==="ElMenu"&&C(c).props.collapse&&k.$slots.title?(R(),we(C(Ae),{key:0,effect:C(c).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:C(c).props.persistent},{content:ve(()=>[j(k.$slots,"title")]),default:ve(()=>[Q("div",{class:se(C(d).be("tooltip","trigger"))},[j(k.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(R(),Y(ue,{key:1},[j(k.$slots,"default"),j(k.$slots,"title")],64))],2))}});var je=ye(wt,[["__file","menu-item.vue"]]);const Nt={title:String},Ot=O({name:"ElMenuItemGroup"}),$t=O({...Ot,props:Nt,setup(e){const t=B("menu-item-group");return(o,n)=>(R(),Y("li",{class:se(C(t).b())},[Q("div",{class:se(C(t).e("title"))},[o.$slots.title?j(o.$slots,"title",{key:1}):(R(),Y(ue,{key:0},[tt(Be(o.title),1)],64))],2),Q("ul",null,[j(o.$slots,"default")])],2))}});var Re=ye($t,[["__file","menu-item-group.vue"]]);const Pt=nt(St,{MenuItem:je,MenuItemGroup:Re,SubMenu:Se}),Bt=_e(je);_e(Re);const zt=_e(Se);function ke(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ot(e)}const De={};function Ve(e){return e.map(({name:t,meta:o,children:n})=>{const{title:u,icon:c,subtitle:d}=o??{};let p;return c&&(De[p=c.name]=c),{title:u??t,subtitle:d??u??t,name:t,icon:p,children:Array.isArray(n)?Ve(n):[]}})}const At=O({name:"MenuComp",props:{menus:{type:Array,default:()=>[]}},setup(e){const t=ze();function o({title:n,name:u,children:c,icon:d}){let p;if(d){const i=De[d];p=N(ue,null,[N(Ce,null,{default:()=>[N(i,null,null)]}),N("span",null,[n])])}else p=N("span",null,[n]);return c.length?N(zt,{index:u},{title:p,default:c.map(o)}):N(Bt,{index:u,route:{name:u}},ke(p)?p:{default:()=>[p]})}return()=>{let n;return N(Pt,{router:!0,"default-active":t.name},ke(n=e.menus.map(o))?n:{default:()=>[n]})}}}),Lt={class:"form-view"},Wt={class:"form-view__body"},jt=O({__name:"FormView",setup(e){const t=Ve(st),o=ze(),n=v(()=>{const{title:u,subtitle:c}=o.meta;return c??u??o.name});return(u,c)=>{const d=lt("router-view");return R(),Y("div",Lt,[N(C(At),{menus:C(t)},null,8,["menus"]),Q("div",Wt,[Q("h2",null,Be(n.value),1),N(d)])])}}}),Gt=vt(jt,[["__scopeId","data-v-18514898"]]);export{Gt as default};
